---
layout: null
---
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:xhtml="http://www.w3.org/1999/xhtml">

  <!--EN -->
  <url>
    <loc>{{ site.url }}/</loc>
    <xhtml:link rel="alternate" hreflang="en" href="{{ site.url }}/" />
    <xhtml:link rel="alternate" hreflang="fr" href="{{ site.url }}/fr/" />
    <xhtml:link rel="alternate" hreflang="x-default" href="{{ site.url }}/" />
    <lastmod>{{ site.time | date_to_xmlschema }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>1.0</priority>
  </url>

  <!--FR -->
  <url>
    <loc>{{ site.url }}/fr/</loc>
    <xhtml:link rel="alternate" hreflang="en" href="{{ site.url }}/" />
    <xhtml:link rel="alternate" hreflang="fr" href="{{ site.url }}/fr/" />
    <xhtml:link rel="alternate" hreflang="x-default" href="{{ site.url }}/" />
    <lastmod>{{ site.time | date_to_xmlschema }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>1.0</priority>
  </url>

  <!-- EN & FR -->
  {% assign en_categories = site.pages | where: "lang", "en" | where: "layout", "category" %}
  {% for cat in en_categories %}
  <url>
    <loc>{{ site.url }}{{ cat.url }}</loc>
    <xhtml:link rel="alternate" hreflang="en" href="{{ site.url }}{{ cat.url }}" />
    <xhtml:link rel="alternate" hreflang="fr" href="{{ site.url }}/fr{{ cat.url }}" />
    <xhtml:link rel="alternate" hreflang="x-default" href="{{ site.url }}{{ cat.url }}" />
    <changefreq>weekly</changefreq>
    <priority>0.8</priority>
  </url>
  {% endfor %}

  {% assign fr_categories = site.pages | where: "lang", "fr" | where: "layout", "category" %}
  {% for cat in fr_categories %}
  <url>
    <loc>{{ site.url }}{{ cat.url }}</loc>
    <xhtml:link rel="alternate" hreflang="en" href="{{ site.url }}{{ cat.url | remove: '/fr' }}" />
    <xhtml:link rel="alternate" hreflang="fr" href="{{ site.url }}{{ cat.url }}" />
    <xhtml:link rel="alternate" hreflang="x-default" href="{{ site.url }}{{ cat.url | remove: '/fr' }}" />
    <changefreq>weekly</changefreq>
    <priority>0.8</priority>
  </url>
  {% endfor %}

  <!-- traductions -->
  {% assign post_ids = site.posts | map: "post_id" | uniq %}
  {% for post_id in post_ids %}
    {% assign posts_with_id = site.posts | where: "post_id", post_id %}
    {% assign en_post = posts_with_id | where: "lang", "en" | first %}
    {% assign fr_post = posts_with_id | where: "lang", "fr" | first %}

    {% if en_post %}
    <url>
      <loc>{{ site.url }}{{ en_post.url }}</loc>
      <xhtml:link rel="alternate" hreflang="en" href="{{ site.url }}{{ en_post.url }}" />
      {% if fr_post %}
      <xhtml:link rel="alternate" hreflang="fr" href="{{ site.url }}{{ fr_post.url }}" />
      {% endif %}
      <xhtml:link rel="alternate" hreflang="x-default" href="{{ site.url }}{{ en_post.url }}" />
      <lastmod>{{ en_post.date | date_to_xmlschema }}</lastmod>
      <changefreq>monthly</changefreq>
      <priority>0.7</priority>
    </url>
    {% endif %}

    {% if fr_post %}
    <url>
      <loc>{{ site.url }}{{ fr_post.url }}</loc>
      {% if en_post %}
      <xhtml:link rel="alternate" hreflang="en" href="{{ site.url }}{{ en_post.url }}" />
      {% endif %}
      <xhtml:link rel="alternate" hreflang="fr" href="{{ site.url }}{{ fr_post.url }}" />
      <xhtml:link rel="alternate" hreflang="x-default" href="{{ site.url }}{{ en_post.url }}" />
      <lastmod>{{ fr_post.date | date_to_xmlschema }}</lastmod>
      <changefreq>monthly</changefreq>
      <priority>0.7</priority>
    </url>
    {% endif %}
  {% endfor %}
</urlset>